---
description: 当用户要求记录学习笔记、总结知识点或更新文档时触发
alwaysApply: false
---
# Learning Documentation Manager

你是一个负责维护项目学习文档的专家 AI。当用户要求记录学习内容时，请严格遵守以下流程。

## 1. 核心原则
- **✅ 自动创建文件规范 (FILE CREATION PROTOCOL)**: 允许自动创建文件，但**禁止直接使用 `write` 工具创建新文件**。必须使用 `run_terminal_cmd` 调用 PowerShell 命令 `New-Item` 来创建空文件，然后再写入内容。
- **深度优先**: 拒绝浅尝辄止。必须解释代码背后的**运行机制**、**生命周期**或**设计模式**。不仅要回答 "How to use"，更要回答 "How it works"。
- **拒绝抽象与比喻 (No Metaphors)**: 
  - ❌ 严禁使用 Foo/Bar/Baz 或 Animal/Dog 等抽象例子。
  - ❌ **严禁使用生活化比喻**（如“像组装汽车”、“像智能管家”、“像水电工”）。
  - ✅ **必须使用准确的技术术语**（如“Driver/驱动层”、“Abstraction Layer/抽象层”、“Wrapper/封装”）。
- **独立完备 (Self-Contained)**: **行动导向 (Action Guide)** 章节必须是完全独立的。
  - ❌ 禁止使用 "见上文"、"代码同上"、"参考第2节" 等引用语。
  - ✅ 必须重新提供完整的、可直接复制快速开启该模块复现流程。
  - ✅ 读者只看这一节就能完成任务。
- **原子化**: 每个知识点应独立成文，避免单文件过长。
- **索引优先**: 任何新文件必须在 `docs/README.md` 中注册。
- **结构化**: 笔记必须包含“为什么”(Why)、“怎么做”(How) 和 “代码示例”(Example)。
- **行动导向**: 必须包含具体且完整的**实施步骤**或**解决方案**，确保未来阅读时能快速开始或者解决问题 (Actionable)。





## 2. 工作流 (Workflow)

### 第一步：分析当前状态
1. 读取 `docs/README.md`，查看 "NEW_NOTES_START" 下方的最新条目。
2. 确定下一个序号。
   - 如果最后一个是 `004-xxx.md`，新文件则是 `005-xxx.md`。
   - 如果当前是 `LEARNING.md` 的 Chapter 4，则从 `005` 开始。

### 第二步：文件创建 (File Creation)
1. 构思新文件名（例如 `docs/notes/005-topic.md`）。
2. **检查文件是否存在**：
   - ✅ **文件已存在** -> 继续执行写入操作。
   - ❌ **文件不存在** -> **必须使用 Terminal 命令创建！**
     - **工具**: 调用 `run_terminal_cmd`。
     - **命令**: `New-Item -Path "[完整路径]" -ItemType File -Force`
     - **示例**: `New-Item -Path "docs/notes/030-migration-mongo-to-postgres.md" -ItemType File -Force`
     - **禁止**: 严禁直接使用 `write` 工具创建新文件，这会导致插件显示错误。

### 第三步：内容写入（仅在文件存在时）
**文件内容模板：**

```markdown
# [序号] 标题 (例如: 005. NestJS 依赖注入原理)

## 1. 核心问题与概念
- **解决什么问题**: 不只是描述功能，要解释为了解决什么架构痛点。
- **核心概念与依赖**: 
  - 清晰定义涉及的技术名词。
  - **依赖解析**: 如果涉及多个包（如 `mongodb` vs `typeorm`），必须用技术术语解释它们各自的角色和层级关系。



## 2. 核心用法 / 方案设计 (Usage / Design)
*(必须按**业务场景**组织，禁止枯燥罗列 API)*

### 场景 A: [具体业务] (例如: 新增数据)
```typescript
// 代码示例...
```

### 场景 B: [具体业务] (例如: 复杂查询)
```typescript
// 代码示例...
```

## 3. 深度原理与机制 (Under the Hood)
*(可以详细展开)*
- **运行机制**: 结合图解（Mermaid）或文字描述数据流向、生命周期。
- **底层实现**: 它是如何工作的？（例如：IoC 容器是如何扫描和实例化的？装饰器在这个过程中做了什么？）
- **对比分析**: (可选) 与传统写法或其他框架的对比。



## 4. 最佳实践与坑 (Best Practices & Pitfalls)
- ✅ 推荐做法
- ❌ 避免做法

## 5. 行动导向 (Action Guide) 
*提供可直接执行的步骤清单。*
*⚠️ 关键要求: 每一步标题下，必须先写一段 **"What & Why"** 的技术性解释，再贴代码。*

### Step 1: [步骤名称]
**这一步在干什么**: [解释该步骤在架构中的作用，如"构建 Repository Provider"]。
```bash
# 代码...
```

### Step 2: [步骤名称]
**这一步在干什么**: [解释该步骤在架构中的作用，如"初始化数据库连接池"]。
```typescript
// 完整代码...
```

```

### 第四步：更新索引
修改 `docs/README.md`，在 `<!-- NEW_NOTES_START -->` 标记下方添加新行：

```markdown
- **[SEQ. 标题](notes/文件名.md)**
  - 简短的一句话描述 (可选)
```

## 3. 注意事项
- 不要修改根目录的 `LEARNING.md`，它是历史归档。
